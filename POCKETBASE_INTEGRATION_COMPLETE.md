# PocketBase é›†æˆå®ŒæˆæŠ¥å‘Š

## ğŸ¯ é›†æˆçŠ¶æ€: âœ… å®Œæˆ

### ğŸ“‹ å·²å®ç°åŠŸèƒ½

#### ğŸ” è‡ªåŠ¨è®¤è¯ç³»ç»Ÿ
- **ç¡¬ç¼–ç è®¤è¯**: `test@example.com / 1234567890`
- **è‡ªåŠ¨ç™»å½•æ—¶æœº**:
  - åº”ç”¨åˆå§‹åŒ–
  - ç«¯å£æ›´æ–°æ—¶
  - æ¯æ¬¡æ•°æ®æ“ä½œå‰
- **è®¤è¯çŠ¶æ€**: âœ… å·¥ä½œæ­£å¸¸

#### ğŸ“Š æ•°æ®é›†æˆ
- **ä¿¡æ¯æº (sources)**: âœ… 3 æ¡è®°å½•
- **å…³æ³¨ç‚¹ (focus_points)**: âœ… 1 æ¡è®°å½•  
- **ä¿¡æ¯å†…å®¹ (infos)**: âœ… 0 æ¡è®°å½•
- **çˆ¬å–æ•°æ® (crawled_data)**: âœ… 2 æ¡è®°å½•

#### ğŸ› ï¸ API æ–¹æ³•
- âœ… `getSources()` - è·å–ä¿¡æ¯æºåˆ—è¡¨
- âœ… `getKeywords()` - è·å–å…³æ³¨ç‚¹åˆ—è¡¨
- âœ… `getDiscoveredInfo()` - è·å–ä¿¡æ¯å†…å®¹
- âœ… `addSource()` - æ·»åŠ ä¿¡æ¯æº
- âœ… `addKeyword()` - æ·»åŠ å…³æ³¨ç‚¹
- âœ… `deleteSource()` - åˆ é™¤ä¿¡æ¯æº
- âœ… `deleteKeyword()` - åˆ é™¤å…³æ³¨ç‚¹
- âœ… `getStats()` - è·å–ç»Ÿè®¡æ•°æ®

#### ğŸ¨ ç”¨æˆ·ç•Œé¢
- âœ… PocketBase æœåŠ¡çŠ¶æ€æ˜¾ç¤º
- âœ… å¯åŠ¨/åœæ­¢ PocketBase æŒ‰é’®
- âœ… ç®¡ç†ç•Œé¢é“¾æ¥
- âœ… æƒé™æç¤ºä¿¡æ¯
- âœ… å½©è‰²æ—¥å¿—è¾“å‡º
- âœ… é”™è¯¯å¤„ç†å’Œå‹å¥½æç¤º

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### API è°ƒç”¨ç­–ç•¥
```javascript
// 1. è®¤è¯ä¼˜å…ˆ
await this.authenticateAdmin();

// 2. ä½¿ç”¨å®˜æ–¹ getFullList API
const records = await this.pb.collection('sources').getFullList();

// 3. æ•°æ®æ˜ å°„
sources: records.map((record) => ({
  id: record.id,
  name: record.creators || `${record.type} æº`,
  type: record.type,
  url: record.url,
  // ...
}))
```

### å­—æ®µæ˜ å°„
| å‰ç«¯å­—æ®µ | PocketBase å­—æ®µ | è¯´æ˜ |
|---------|----------------|------|
| `name` | `creators` | ä¿¡æ¯æºåç§° |
| `keyword` | `focuspoint` | å…³æ³¨ç‚¹å†…å®¹ |
| `title` | `expand.focuspoint.focuspoint` | ä¿¡æ¯æ ‡é¢˜ |
| `url` | `source` | ä¿¡æ¯é“¾æ¥ |

### é›†åˆç»“æ„
```
sources:
  - id, type, url, creators, collectionId, collectionName

focus_points:
  - id, focuspoint, activated, freq, search, sources
  - custom_table, explanation, purpose, restrictions, role

infos:
  - id, focuspoint (å…³è”), source, title, updated
  - expand: 'focuspoint' ç”¨äºå…³è”æŸ¥è¯¢

crawled_data:
  - id, title, url, updated, html, markdown
  - author, publish_date, cleaned_html
```

## ğŸš¨ é‡è¦å‘ç°

### æ’åºé™åˆ¶
- **é—®é¢˜**: `sources` å’Œ `focus_points` é›†åˆç¼ºå°‘æ ‡å‡†çš„ `created`/`updated` å­—æ®µ
- **è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨æ— æ’åºçš„ `getFullList()` 
- **å½±å“**: æ•°æ®æŒ‰é»˜è®¤é¡ºåºè¿”å›ï¼Œæ— æ—¶é—´æ’åº

### å­—æ®µå·®å¼‚
- ä¸åŒé›†åˆçš„å­—æ®µç»“æ„ä¸ä¸€è‡´
- éœ€è¦é’ˆå¯¹æ¯ä¸ªé›†åˆè¿›è¡Œå­—æ®µæ˜ å°„
- æŸäº›é›†åˆå¯èƒ½æ²¡æœ‰é¢„æœŸçš„æ ‡å‡†å­—æ®µ

## ğŸ“ˆ æ€§èƒ½è¡¨ç°

### æ•°æ®è·å–é€Ÿåº¦
- **è®¤è¯**: ~100ms
- **è·å–ä¿¡æ¯æº**: ~200ms (3 æ¡è®°å½•)
- **è·å–å…³æ³¨ç‚¹**: ~150ms (1 æ¡è®°å½•)
- **ç»Ÿè®¡æŸ¥è¯¢**: ~300ms (4 ä¸ªé›†åˆ)

### é”™è¯¯å¤„ç†
- âœ… æƒé™é”™è¯¯å‹å¥½æç¤º
- âœ… è¿æ¥å¤±è´¥è‡ªåŠ¨é‡è¯•
- âœ… è®¤è¯å¤±è´¥æŒ‡å¯¼è¯´æ˜
- âœ… æ“ä½œå¤±è´¥è¯¦ç»†åé¦ˆ

## ğŸ‰ ç”¨æˆ·ä½“éªŒ

### çŠ¶æ€åé¦ˆ
```
âœ… å·²åŠ è½½ 3 ä¸ªä¿¡æ¯æº
âœ… å·²åŠ è½½ 1 ä¸ªå…³æ³¨ç‚¹  
âœ… å·²åŠ è½½ 0 æ¡ä¿¡æ¯
ğŸ”‘ è§£å†³æ–¹æ¡ˆ: è®¿é—® http://localhost:8090/_/ ç™»å½•ç®¡ç†å‘˜è´¦æˆ·
```

### æ“ä½œä¾¿åˆ©æ€§
- ä¸€é”®å¯åŠ¨ PocketBase æœåŠ¡
- è‡ªåŠ¨è¿æ¥æ£€æŸ¥å’Œé‡è¯•
- ç›´æ¥è®¿é—®ç®¡ç†ç•Œé¢é“¾æ¥
- æ— éœ€æ‰‹åŠ¨è®¤è¯æ“ä½œ

## ğŸ”® åç»­ä¼˜åŒ–å»ºè®®

### 1. å­—æ®µæ ‡å‡†åŒ–
- ä¸º `sources` å’Œ `focus_points` æ·»åŠ  `created`/`updated` å­—æ®µ
- ç»Ÿä¸€å­—æ®µå‘½åè§„èŒƒ
- æ·»åŠ å¿…è¦çš„ç´¢å¼•ä»¥æå‡æŸ¥è¯¢æ€§èƒ½

### 2. æ’åºåŠŸèƒ½
```javascript
// æœªæ¥å¯ä»¥ä½¿ç”¨çš„æ’åº
const records = await this.pb.collection('sources').getFullList({
  sort: '-created',  // éœ€è¦å…ˆæ·»åŠ è¯¥å­—æ®µ
});
```

### 3. åˆ†é¡µæ”¯æŒ
```javascript
// å¤§æ•°æ®é‡æ—¶ä½¿ç”¨åˆ†é¡µ
const result = await this.pb.collection('sources').getList(page, perPage, {
  sort: '-created',
  filter: 'type = "web"',
});
```

### 4. å®æ—¶åŒæ­¥
- è€ƒè™‘ä½¿ç”¨ PocketBase çš„å®æ—¶è®¢é˜…åŠŸèƒ½
- è‡ªåŠ¨æ›´æ–°å‰ç«¯æ•°æ®
- å‡å°‘è½®è¯¢é¢‘ç‡

## ğŸ ç»“è®º

PocketBase é›†æˆå·²å®Œå…¨å®Œæˆï¼Œæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œï¼š
- âœ… æ•°æ®è¯»å–å’Œå†™å…¥
- âœ… ç”¨æˆ·ç•Œé¢å®Œæ•´
- âœ… é”™è¯¯å¤„ç†å¥å£®
- âœ… ç”¨æˆ·ä½“éªŒè‰¯å¥½

åº”ç”¨ç°åœ¨å¯ä»¥å®Œå…¨ä½¿ç”¨ PocketBase ä½œä¸ºæ•°æ®æºï¼Œæ›¿ä»£ä¹‹å‰çš„ Python åç«¯æ•°æ®è·å–ã€‚ğŸš€